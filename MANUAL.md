# 公共賃貸住宅維持管理システム 操作マニュアル

## 目次

1. [概要](#1-概要)
2. [起動と初期設定](#2-起動と初期設定)
3. [チーム管理](#3-チーム管理)
4. [住宅物件管理](#4-住宅物件管理)
5. [点検・検査](#5-点検検査)
6. [コメント機能](#6-コメント機能)
7. [地図機能](#7-地図機能)
8. [建物模式図](#8-建物模式図)

---

## 1. 概要

本システムは、公共賃貸住宅の維持管理業務を支援するデスクトップアプリケーションです。チーム単位で物件を管理し、チェックリストを用いた点検記録の作成・管理、コメントによる情報共有などの機能を提供します。

---

## 2. 起動と初期設定

### アプリケーションの起動

アプリケーションを起動すると、チーム選択画面が表示されます。

---

## 3. チーム管理

### 3-1. チームの作成

1. チーム選択画面で **「新規チーム作成」** ボタンをクリックします
2. チーム名を入力します
3. **「作成」** ボタンをクリックして保存します

### 3-2. チームの選択

- チーム選択画面に表示されているチームカードをクリックすると、そのチームの物件一覧画面に移動します

### 3-3. チームの切り替え

- ヘッダーのチーム切り替えボタンからいつでもチームを変更できます
- チームを切り替えると、そのチームの物件一覧が表示されます

---

## 4. 住宅物件管理

### 4-1. 物件一覧の確認

チームを選択すると、そのチームに登録された物件の一覧が表示されます。

- 各物件はカード形式で表示されます
- 物件カードには物件名・所在地・階数などの基本情報が表示されます
- **地図表示** タブに切り替えると、登録済み物件がマップ上にピンで表示されます

### 4-2. 新規物件の登録

1. 物件一覧画面で **「新規物件登録」** ボタンをクリックします
2. 以下の情報を入力します

#### 基本情報

| 項目 | 説明 |
|------|------|
| 物件名 | 建物の名称 |
| 説明 | 物件の補足説明（任意） |

#### 所在地情報

| 項目 | 説明 |
|------|------|
| 住所検索 | 住所を入力して検索すると緯度・経度を自動取得できます |
| 緯度 | 物件の緯度（小数点形式） |
| 経度 | 物件の経度（小数点形式） |
| 標高 | 緯度・経度から自動取得できます（「標高を取得」ボタン） |

**地図上でのピン操作:**
- マップ上のピンをドラッグして位置を調整できます
- ピンを移動すると緯度・経度が自動的に更新されます

#### 建物構成情報

| 項目 | 説明 |
|------|------|
| 総階数 | 建物の階数 |
| 1フロアあたりの部屋数 | 各階の部屋数（共通設定） |
| 1フロアあたりの階段数 | 各階の階段数（共通設定） |

**フロア別設定:**
- 「フロアごとに設定する」を有効にすると、階ごとに部屋数・階段数を個別に設定できます

3. 入力完了後、**「登録」** ボタンをクリックして保存します

### 4-3. 物件詳細の確認

物件カードをクリックすると、物件詳細画面に移動します。

詳細画面では以下の情報が確認できます：

- 物件の基本情報（名称・説明・登録日）
- 所在地情報（緯度・経度・標高）
- 建物構成（階数・各階の部屋数・階段数）
- 建物模式図
- 点検記録一覧
- コメント一覧・地図

---

## 5. 点検・検査

### 5-1. 点検記録の作成

1. 物件詳細画面で **「新規点検」** ボタンをクリックします
2. 点検記録が作成され、チェックリスト入力画面に移動します

### 5-2. チェックリストの入力

チェックリストは以下の階層構造で整理されています：

```
大分類（例：日常点検）
  └─ 中分類（例：建物）
       └─ 小分類・部位
            └─ 点検項目
```

#### 評価ランクの入力

各点検項目に対して以下のランクを設定します：

| ランク | 説明 |
|--------|------|
| A | 良好 |
| B | 経過観察 |
| C | 要修繕 |
| D1 | 緊急修繕（軽微） |
| D2 | 緊急修繕（重大） |

#### 点検ユニット

点検は以下のユニット単位で実施します：

- **外部ユニット** - 建物外部・共用部の点検
- **居住ユニット** - 各住戸内の点検
- **各階の部屋** - フロアごとの部屋単位の点検
- **各階の階段** - フロアごとの階段単位の点検

### 5-3. 点検状態の管理

| 状態 | 説明 |
|------|------|
| 進行中 | 点検作業が継続中 |
| 完了 | 点検が終了した状態 |

- 点検一覧から各点検記録の状態を確認できます
- 完了した点検は変更不可となります

### 5-4. 点検履歴の確認

物件詳細画面の点検一覧から、過去の点検記録を参照できます。

---

## 6. コメント機能

### 6-1. コメントの追加

1. 物件詳細画面のコメントセクションで **「コメントを追加」** ボタンをクリックします
2. 以下の情報を入力します

| 項目 | 説明 |
|------|------|
| コメント内容 | テキストで記録内容を入力します |
| 位置情報 | マップ上でピンを置いて場所を指定できます |
| 画像 | 写真を添付できます（複数枚対応） |

3. **「保存」** ボタンをクリックして投稿します

### 6-2. コメントの確認

- コメントは物件詳細画面の一覧で確認できます
- コメントに位置情報が付いている場合、地図上にピンで表示されます
- 画像が添付されている場合はサムネイルが表示されます

### 6-3. コメントの編集・削除

- コメント右側の **「編集」** ボタンで内容を修正できます
- **「削除」** ボタンでコメントを削除できます（削除後は元に戻せません）

---

## 7. 地図機能

### 7-1. 物件一覧マップ

チーム内の全物件を地図上で確認できます。

- 物件はピン（マーカー）で表示されます
- ピンをクリックすると物件名と簡易情報がポップアップ表示されます

### 7-2. 物件位置の設定（物件登録時）

新規物件登録画面のマップ操作：

- **ピンのドラッグ** - 正確な位置に調整できます
- **住所検索** - 住所入力から自動で位置を設定できます
- 位置を確定すると緯度・経度が自動入力されます

### 7-3. コメントマップ

物件詳細画面のコメントマップでは、その物件に紐づく全コメントの位置を確認できます。

- 位置情報付きコメントがマップ上にピン表示されます
- ピンをクリックするとコメント内容がポップアップ表示されます

### 7-4. 住所・標高の自動取得

物件登録時に利用できる外部連携機能：

| 機能 | 操作方法 |
|------|----------|
| 住所→位置変換 | 住所欄に入力して「検索」ボタンをクリック |
| 標高取得 | 緯度・経度設定後に「標高を取得」ボタンをクリック |

> **注意:** 住所検索・標高取得にはインターネット接続が必要です。

---

## 8. 建物模式図

### 8-1. 模式図の見方

物件詳細画面では、登録した建物構成に基づいて建物の模式図（SVG）が表示されます。

- 建物は上階から順に表示されます
- **青色セル** - 居室を表します
- **黄色セル（斜線入り）** - 階段を表します
- 最下段は地面レベルを示します

### 8-2. フロア構成の反映

- フロアごとに部屋数・階段数が異なる場合、それぞれの構成が模式図に反映されます
- 階数・部屋数・階段数を変更した場合は、模式図も自動的に更新されます

---

## 補足情報

### データ保存について

- すべてのデータはローカルの SQLite データベースに保存されます
- データはアプリケーションのデータディレクトリに格納されます
- 定期的にバックアップすることを推奨します

### 動作環境

- OS: Windows / macOS
- インターネット接続: 住所検索・標高取得機能の使用時のみ必要

---

*本マニュアルはシステムバージョン 0.2.0 を対象としています。*
